<!-- templates/documents/salary_slip.html -->

<!-- ================= ACTION BAR ================= -->
<div class="action-bar">
    <div class="action-bar-container">

        <form action="{{ url_for('generate') }}" method="POST">
            <input type="hidden" name="upload_to_drive" value="false">
            <button type="submit" class="btn btn-primary">Download</button>
        </form>

        <form action="{{ url_for('generate') }}" method="POST">
            <input type="hidden" name="upload_to_drive" value="true">
            <button type="submit" class="btn btn-success">Download & Save</button>
        </form>

        <button type="button" class="btn btn-secondary" onclick="window.print()">
            Print
        </button>

        <a href="{{ url_for('admin_dashboard') }}" class="btn btn-danger">
            Cancel
        </a>

    </div>
</div>

<style>

/* ================= GLOBAL ================= */

body{
    margin:0;
    background:#f4f4f4;
    font-family: 'Segoe UI', Arial, sans-serif;
}

@page {
    size: A4;
    margin: 1.8cm;
}

@media print{
    .action-bar{ display:none !important; }
    body{ background:white; }
}

/* ================= ACTION BAR ================= */

.action-bar{
    background:white;
    padding:15px 0;
    border-bottom:1px solid #000;
}

.action-bar-container{
    max-width:1000px;
    margin:auto;
    display:flex;
    justify-content:flex-end;
    gap:10px;
    padding:0 20px;
}

.btn{
    padding:10px 18px;
    border:1px solid #000;
    border-radius:4px;
    font-size:14px;
    cursor:pointer;
    font-weight:500;
    background:white;
    color:black;
}

.btn:hover{
    background:#e9e9e9;
}

/* ================= SALARY SLIP CONTAINER ================= */

.salary-slip{
    max-width:900px;
    margin:30px auto;
    background:white;
    padding:35px;
    border:1px solid #000;
}

/* ================= LETTERHEAD ================= */

.letterhead{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding-bottom:15px;
    border-bottom:2px solid #000;
    margin-bottom:20px;
}

.letterhead img{
    height:70px;
}

.company-info{
    text-align:right;
    font-size:13px;
    color:#000;
}

.company-info strong{
    font-size:15px;
}

/* ================= TITLE ================= */

.month-title{
    text-align:center;
    font-size:20px;
    font-weight:600;
    color:#000;
    margin-bottom:25px;
    text-transform:uppercase;
}

/* ================= EMPLOYEE TABLE ================= */

.employee-details{
    margin-bottom:25px;
}

.employee-details table{
    width:100%;
    border-collapse:collapse;
    font-size:14px;
}

.employee-details td{
    padding:8px 12px;
    border:1px solid #000;
}

.employee-details .label{
    background:#f2f2f2;
    font-weight:600;
    width:18%;
}

/* ================= SALARY TABLE ================= */

.salary-table{
    width:100%;
    border-collapse:collapse;
    font-size:14px;
    border:1px solid #000;
}

.salary-table th{
    background:#000;
    color:white;
    padding:10px;
    text-align:left;
    border:1px solid #000;
}

.salary-table td{
    padding:8px 12px;
    border:1px solid #000;
}

.salary-table .amount{
    text-align:right;
}

.total-row{
    background:#f2f2f2;
    font-weight:600;
}

/* ================= NET SALARY ================= */

.net-salary{
    text-align:right;
    margin-top:20px;
    font-size:17px;
    font-weight:600;
    color:#000;
}

.words{
    margin-top:10px;
    font-style:italic;
    font-size:14px;
    color:#000;
}

</style>

<!-- Watermark -->
{% include '_watermark.html' %}

<div class="salary-slip">

    <!-- LETTERHEAD -->
    <div class="letterhead">
        <img src="{{ request.url_root }}static/images/{{ company.logo }}" alt="{{ company.name }} Logo">
        <div class="company-info">
            <strong>{{ company.name }}</strong><br>
            {{ company.address }}<br>
            Phone: {{ company.phone }} | Email: {{ company.email }}<br>
            Website: {{ company.website }}
        </div>
    </div>

    <!-- TITLE -->
    <div class="month-title">
        Salary Slip â€“ {{ data.month }} {{ session.get('selected_year', now.year) }}
    </div>

    <div class="month-navigation">
        {% if data.preview_month and months|length > 1 %}
            <p>Previewing: <strong>{{ data.preview_month }}</strong></p>
            <p>Other months:
            {% for m in months %}
                {% if m != data.preview_month %}
                    <a href="{{ url_for('preview', month=m) }}">{{ m }}</a>
                {% endif %}
            {% endfor %}
            </p>
        {% endif %}
    </div>

    <!-- EMPLOYEE DETAILS -->
    <div class="employee-details">
        <table>
            <tr>
                <td class="label">Code</td>
                <td>{{ data.employee_id }}</td>
                <td class="label">Department</td>
                <td>{{ data.department or 'Information Technology (IT) Department' }}</td>
            </tr>
            <tr>
                <td class="label">Name</td>
                <td>{{ data.full_name }}</td>
                <td class="label">PAN Card</td>
                <td>{{ data.pan_no or 'N/A' }}</td>
            </tr>
            <tr>
                <td class="label">Designation</td>
                <td>{{ data.designation }}</td>
                <td class="label">Worked Days</td>
                <td>{{ data.worked_days or 30 }}</td>
            </tr>
            <tr>
                <td class="label">Date of Joining</td>
                <td>{{ data.joining_date.strftime('%d/%m/%Y') if data.joining_date else '' }}</td>
                <td class="label">LOP</td>
                <td>{{ data.lop or 0 }}</td>
            </tr>
            <tr>
                <td class="label">Gender</td>
                <td>{{ data.gender or 'Male' }}</td>
                <td class="label">Paid Days</td>
                <td>{{ data.paid_days or 30 }}</td>
            </tr>
        </table>
    </div>

    <!-- SALARY TABLE -->
    <table class="salary-table">
        <thead>
            <tr>
                <th>Earnings</th>
                <th class="amount">Current Month</th>
                <th>Deductions</th>
                <th class="amount">Current Month</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Basic</td>
                <td class="amount">{{ "{:,.0f}".format(data.basic|default(0)) }}</td>
                <td>Professional Tax</td>
                <td class="amount">{{ "{:,.0f}".format(data.professional_tax|default(200)) }}</td>
            </tr>
            <tr>
                <td>HRA</td>
                <td class="amount">{{ "{:,.0f}".format(data.hra|default(0)) }}</td>
                <td>Income Tax</td>
                <td class="amount">{{ "{:,.0f}".format(data.income_tax|default(0)) }}</td>
            </tr>
            <tr>
                <td>Medical</td>
                <td class="amount">{{ "{:,.0f}".format(data.medical|default(0)) }}</td>
                <td>Other</td>
                <td class="amount">{{ "{:,.0f}".format(data.other_deductions|default(0)) }}</td>
            </tr>
            <tr>
                <td>Internet/Mobile</td>
                <td class="amount">{{ "{:,.0f}".format(data.internet|default(0)) }}</td>
                <td>Provident Fund</td>
                <td class="amount">{{ "{:,.0f}".format(data.provident_fund|default(0)) }}</td>
            </tr>
            <tr>
                <td>Other Allowances</td>
                <td class="amount">{{ "{:,.0f}".format(data.other_allowances|default(0)) }}</td>
                <td>Paid Leave</td>
                <td class="amount">{{ "{:,.0f}".format(data.paid_leave|default(0)) }}</td>
            </tr>

            <tr class="total-row">
                <td>GROSS EARNINGS</td>
                <td class="amount">{{ "{:,.2f}".format(data.gross_earnings|default(0)) }}</td>
                <td>GROSS DEDUCTIONS</td>
                <td class="amount">{{ "{:,.2f}".format(data.gross_deductions|default(0)) }}</td>
            </tr>
        </tbody>
    </table>

    <div class="net-salary">
        NET Salary : Rs. {{ "{:,.0f}".format(data.net_salary|default(0)) }}/-
    </div>

    <div class="words">
        Net Payable in Words : {{ data.words or 'Thirty Three Thousand One Hundred' }}
    </div>

</div>